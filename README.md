# attendable 2.1
NO MORE 出席泥棒. 簡単で確実な出席取りシステム

> [!NOTE]
> このシステム（attendable）は出席の成績加味を推奨するものではありません．学生の成績は出席ではなく授業参画度を基準として評価すべきです．ご利用される方はその点に十分留意，配慮をしたうえで本システムを利用してください．

## Version
 - [v2.2](https://github.com/TetsuakiBaba/attendable/tree/main)
   - カメラ機能の強化で遠くからでもQRコードを読み取りやすくした。
     - zoom機能があるカメラの場合は映像したのスライダーでズームできるようにした
     - 複数カメラがあるようなスマートフォンの場合、なるべく望遠でカメラをオープンできたほうがよいため、デフォルトオープン設定機能を追加した。「設定」タブを新規ついかして、そこからデフォルトカメラ設定ができる。
 - [v2.1](https://github.com/TetsuakiBaba/attendable/tree/v2.1)
   - 出席コードをconfirmすると該当するユーザの現在までの出席回数と，出席コードを取得した日付も確認できるようにした
 - [v2.0](https://github.com/TetsuakiBaba/attendable/tree/v2.0)
   - 出欠時に自動でサーバサイドに出席コードを保存するように変更
 - [v1.0](https://github.com/TetsuakiBaba/attendable/tree/v1.0)
   - 最初のリリース．QRコードと暗号化された出席コードで出席を取るシステム


## 概要
大人数授業でどうしても出席を取らないといけないときに考えた、なるべく簡単且つちゃんと出席を取るためのシステムです。教員が提示するQRコードを学生は専用のページから読み込むことで、その日の出席を登録することができます。教員から提示されるQRコードは30秒毎に失効するため、QRコードのスクリーンショットによる他者利用が困難になります。取得した出席コードには出席時のタイムスタンプ、授業名、学生番号が暗号化されているため、自分の出席証明のみにしか利用できません。この他にも細かな代返防止対策が施されているので、比較的精確な出席状況を把握することが簡単にできるようになっています。

使い方の流れは以下の通り。

1. 教員がQRコード（/admin/index.html）を提示する。このQRコードには暗号化されたタイムスタンプと授業名が含まれている
2. 学生は専用ウェブアプリ（/index.html）からスマホをかざしてQRコードを読み込む。
3. QRコードが生成されて任意時間以内であれば任意の文字列（タイムスタンプ,学修番号）を暗号化して、その文字列（出席コード）をもらう。
4. 学生は取得できた文字列（出席コード）を大事に保管する。出席コードはConfirmボタンから確認することができる。ついでにこれまでの出席回数や出席を取得した日付も確認できる。
5. 授業の通常回数を終了後、教員は出席コードをまとめて取得することができる。学生は自身の授業回数が自身の認識と異なる場合は該当する出席コードを利用して教員に反論することができる。

## Getting Started
```
git clone https://github.com/TetsuakiBaba/attendable.git
cd attendable
echo '<?PHP key="your_secret_random_pass_phrase_key" ?>' > key.php
php -S localhost:8000
```
ブラウザでlocalhost:8000にアクセスすると利用できます。
 * /admin/index.html 教員用QRコード生成ページ
 * /index.html 学生用QRコード読み取りページ

## Deploy
PHPが動作するサーバにファイルをアップロードして利用してください。admin/ ディレクトリについてはそのままでは認証処理を行っていないため、適切な対策を行ってください。

## 利用している技術
 * PHP, SQLITE
 * HTML, CSS, JavaScript

## 利用しているライブラリ
 * [jsQR]()
 * [FileSaver.js]()
 * [tableexport.js]()
 * [bootstrap]()
 * [loadcsv.js]()
